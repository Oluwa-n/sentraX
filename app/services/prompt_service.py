 # Builds dynamic system prompt.
│   │       # Injects user memory.
│   │       # Combines system + history + new message.